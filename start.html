<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="CSS/basics.css">
    <link rel="stylesheet" href="CSS/register.css">
    <link rel="stylesheet" href="CSS/start.css">
    <script src="jq/jquery-1.12.4.js"></script>
    <script src="jq/pulic.js"></script>
    <title>游戏起始页</title>
</head>

<body>
    <!-- 头部部分 -->
    <header>
        <div class="header-box">
            <div class="header-img">
                <a href="index.html">
                    <img src="images/timg.jpg" alt="">
                </a>
            </div>

            <div class="header-text">
                <h1>游戏人数</h1>
            </div>
        </div>
    </header>

    <div class="box">
        <div class="main">
            <h2>游戏人数</h2>

            <div class="main-btn">
                <button>9</button>
                <button>10</button>
                <button>11</button>
                <button>12</button>
            </div>

            <div class="main-text">
                <ul class="main-content">
                    <li class="main-item">
                        <cite>村民:</cite>
                        <span class="village">
                            <i></i>
                            人
                        </span>
                    </li>
                    <li class="main-item">
                        <cite>狼人:</cite>
                        <span class="wolf">
                            <i></i>
                            人
                        </span>
                    </li>
                    <li class="main-item">
                        <cite>预言家:</cite>
                        <span class="prediction">
                            <i></i>
                            人
                        </span>
                    </li>
                    <li class="main-item">
                        <cite>女巫:</cite>
                        <span class="witch">
                            <i></i>
                            人
                        </span>
                    </li>
                    <li class="main-item">
                        <cite>守卫:</cite>
                        <span class="guard">
                            <i></i>
                            人
                        </span>
                    </li>
                </ul>
            </div>

            <div class="next-btn">
                <button disabled id="forbidden">下一步</button>
            </div>
        </div>
    </div>

    <script>
        var oText = null;
        var oVillage = null;
        var oWolf = null;

        $(".main-btn button").click(function () {
            $("#forbidden").removeAttr("disabled");
            $(this).css({
                background: "red"
            })
            $(this).siblings().css({
                background: "green"
            })
            oText = $(this).text()
            oText = parseInt(oText);
            // console.log(oText);
            switch (oText) {
                case 9:
                    $(".village").text("3人");
                    $(".wolf").text("3人");
                    $(".prediction").text("1人");
                    $(".witch").text("1人");
                    $(".guard").text("1人");
                    break;

                case 10:
                    $(".village").text("4人");
                    $(".wolf").text("3人");
                    $(".prediction").text("1人");
                    $(".witch").text("1人");
                    $(".guard").text("1人");
                    break;

                case 11:
                    $(".village").text("4人");
                    $(".wolf").text("4人");
                    $(".prediction").text("1人");
                    $(".witch").text("1人");
                    $(".guard").text("1人");
                    break;

                case 12:
                    $(".village").text("5人");
                    $(".wolf").text("4人");
                    $(".prediction").text("1人");
                    $(".witch").text("1人");
                    $(".guard").text("1人");
                    break;
            }
            oVillage = $(".village").text();
            oVillage = parseInt(oVillage);
            // console.log(oVillage)
            oWolf = $(".wolf").text();
            oWolf = parseInt(oWolf);
            // console.log(oWolf)
            // var arr = [];
            // for (var i = 0; i < oText; i++) {
            //     if (i < oVillage) {
            //         arr[i] = 0;
            //     }
            //     sum = (oVillage + oWolf);
            //     console.log(sum);
            //     if (i >= oVillage && i < sum) {
            //         arr[i] = 1;
            //     }
            //     if (i >= sum && i < oText) {
            //         arr[i] = 2;
            //     }
            // }
            // console.log(arr);
            // console.log(oBrr); 
        })

        $("#forbidden").click(function () {
            // console.log(oText);
            // console.log(oVillage);
            // console.log(oWolf);
            // console.log(sum);
            var arr = [];
            for (var i = 0; i < oText; i++) {
                if (i < oVillage) {
                    arr[i] = "village";
                }
                var sum = (oVillage + oWolf);
                // console.log(sum);
                if (i >= oVillage && i < sum) {
                    arr[i] = "wolf";
                }
            }

                arr.push("prediction");
                arr.push("witch");
                arr.push("guard");

            for (var i = 0; i < arr.length; i++) {
                var oRandom = parseInt(Math.random() * (arr.length - 1));
                var middle = arr[i];
                arr[i] = arr[oRandom];
                arr[oRandom] = middle;
                // console.log(oRandom)
            }
            console.log(arr)
            var oBrr = JSON.stringify(arr);
            console.log(oBrr)
            localStorage.setItem("status", oBrr);
            window.location.href = "deal.html";
        })
    </script>
</body>

</html>